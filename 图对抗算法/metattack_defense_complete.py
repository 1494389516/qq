"""
Metattacké˜²å¾¡å®Œæ•´æ¼”ç¤º
å®ç°7å±‚çºµæ·±é˜²å¾¡ä½“ç³»

æ ¸å¿ƒæ€æƒ³ï¼šä¸æ±‚100%é˜²å¾¡ï¼Œä½†è®©æ”»å‡»"ä¸åˆ’ç®—"
"""

import torch
import torch.nn as nn
import torch.nn.functional as F
from torch_geometric.nn import GCNConv
from torch_geometric.datasets import Planetoid
import numpy as np
from collections import defaultdict
import copy

print("=" * 80)
print("ğŸ›¡ï¸ Metattacké˜²å¾¡ä½“ç³»å®Œæ•´æ¼”ç¤º")
print("=" * 80)


# ============================================================================
# GCNæ¨¡å‹å®šä¹‰
# ============================================================================

class GCN(nn.Module):
    """å›¾å·ç§¯ç½‘ç»œ"""
    
    def __init__(self, num_features, num_classes, hidden=16):
        super().__init__()
        self.conv1 = GCNConv(num_features, hidden)
        self.conv2 = GCNConv(hidden, num_classes)
        
    def forward(self, x, edge_index):
        x = self.conv1(x, edge_index)
        x = F.relu(x)
        x = F.dropout(x, p=0.5, training=self.training)
        x = self.conv2(x, edge_index)
        return F.log_softmax(x, dim=1)


# ============================================================================
# ç¬¬1å±‚ï¼šæ•°æ®æ¸…æ´—
# ============================================================================

class DataCleaner:
    """è®­ç»ƒæ•°æ®æ¸…æ´—"""
    
    def __init__(self, data):
        self.data = data
        self.suspicious_nodes = set()
    
    def detect_anomalies(self):
        """æ£€æµ‹å¼‚å¸¸èŠ‚ç‚¹"""
        print("\n" + "-" * 80)
        print("ç¬¬1å±‚é˜²å¾¡ï¼šæ•°æ®æ¸…æ´—")
        print("-" * 80)
        
        # æ£€æµ‹1ï¼šåº¦æ•°å¼‚å¸¸
        degrees = self._compute_degrees()
        avg_degree = degrees.float().mean().item()
        std_degree = degrees.float().std().item()
        
        for node in range(self.data.num_nodes):
            degree = degrees[node].item()
            # åº¦æ•°å¼‚å¸¸ï¼ˆå¤ªé«˜æˆ–å¤ªä½ï¼‰
            if abs(degree - avg_degree) > 2 * std_degree:
                self.suspicious_nodes.add(node)
        
        print(f"âœ“ åº¦æ•°å¼‚å¸¸æ£€æµ‹: å‘ç°{len(self.suspicious_nodes)}ä¸ªå¯ç–‘èŠ‚ç‚¹")
        
        # æ£€æµ‹2ï¼šç‰¹å¾å¼‚å¸¸ï¼ˆç®€åŒ–ç‰ˆï¼‰
        feature_mean = self.data.x.mean(dim=0)
        feature_std = self.data.x.std(dim=0)
        
        for node in range(min(1000, self.data.num_nodes)):  # é‡‡æ ·æ£€æµ‹
            feature_dev = torch.abs(self.data.x[node] - feature_mean)
            if (feature_dev > 3 * feature_std).sum() > 10:
                self.suspicious_nodes.add(node)
        
        print(f"âœ“ ç‰¹å¾å¼‚å¸¸æ£€æµ‹: ç´¯è®¡{len(self.suspicious_nodes)}ä¸ªå¯ç–‘èŠ‚ç‚¹")
        
        return self.suspicious_nodes
    
    def clean_training_set(self, train_mask):
        """ä»è®­ç»ƒé›†ä¸­ç§»é™¤å¯ç–‘èŠ‚ç‚¹"""
        clean_mask = train_mask.clone()
        
        for node in self.suspicious_nodes:
            if node < len(clean_mask):
                clean_mask[node] = False
        
        removed = train_mask.sum() - clean_mask.sum()
        print(f"âœ“ ä»è®­ç»ƒé›†ç§»é™¤: {removed}ä¸ªå¯ç–‘èŠ‚ç‚¹")
        print(f"  å‰©ä½™è®­ç»ƒèŠ‚ç‚¹: {clean_mask.sum().item()}")
        
        return clean_mask
    
    def _compute_degrees(self):
        """è®¡ç®—èŠ‚ç‚¹åº¦æ•°"""
        degrees = torch.zeros(self.data.num_nodes, dtype=torch.long)
        for i in range(self.data.edge_index.shape[1]):
            src = self.data.edge_index[0, i].item()
            degrees[src] += 1
        return degrees


# ============================================================================
# ç¬¬2å±‚ï¼šå¯¹æŠ—è®­ç»ƒ
# ============================================================================

def adversarial_training(model, data, train_mask, epochs=100, noise_scale=0.1):
    """å¯¹æŠ—è®­ç»ƒ"""
    print("\n" + "-" * 80)
    print("ç¬¬2å±‚é˜²å¾¡ï¼šå¯¹æŠ—è®­ç»ƒ")
    print("-" * 80)
    print("ç­–ç•¥ï¼šåœ¨è®­ç»ƒæ—¶æ··å…¥å¯¹æŠ—æ ·æœ¬ï¼Œè®©æ¨¡å‹è§è¿‡æ”»å‡»")
    
    optimizer = torch.optim.Adam(model.parameters(), lr=0.01, weight_decay=5e-4)
    
    for epoch in range(epochs):
        model.train()
        optimizer.zero_grad()
        
        # 1. å¹²å‡€æ•°æ®è®­ç»ƒ
        out_clean = model(data.x, data.edge_index)
        loss_clean = F.nll_loss(out_clean[train_mask], data.y[train_mask])
        
        # 2. ç”Ÿæˆå¯¹æŠ—æ ·æœ¬ï¼ˆåœ¨ç‰¹å¾ä¸ŠåŠ æ‰°åŠ¨ï¼‰
        x_perturbed = data.x + torch.randn_like(data.x) * noise_scale
        
        # 3. å¯¹æŠ—æ ·æœ¬è®­ç»ƒ
        out_adv = model(x_perturbed, data.edge_index)
        loss_adv = F.nll_loss(out_adv[train_mask], data.y[train_mask])
        
        # 4. ç»¼åˆæŸå¤±
        loss = 0.6 * loss_clean + 0.4 * loss_adv
        
        loss.backward()
        optimizer.step()
        
        if (epoch + 1) % 25 == 0:
            model.eval()
            with torch.no_grad():
                pred = model(data.x, data.edge_index).argmax(dim=1)
                train_acc = pred[train_mask].eq(data.y[train_mask]).float().mean()
            print(f"  Epoch {epoch+1}/{epochs}, Loss={loss:.4f}, Acc={train_acc:.4f}")
            model.train()
    
    print("âœ“ å¯¹æŠ—è®­ç»ƒå®Œæˆ")
    return model


# ============================================================================
# ç¬¬3å±‚ï¼šåŠ¨æ€é‡è®­ç»ƒç­–ç•¥
# ============================================================================

class DynamicRetraining:
    """åŠ¨æ€é‡è®­ç»ƒç­–ç•¥"""
    
    def __init__(self, retrain_frequency=30):
        self.retrain_frequency = retrain_frequency  # å¤©
    
    def demonstrate(self):
        """æ¼”ç¤ºåŠ¨æ€é‡è®­ç»ƒçš„æ•ˆæœ"""
        print("\n" + "-" * 80)
        print("ç¬¬3å±‚é˜²å¾¡ï¼šåŠ¨æ€é‡è®­ç»ƒ")
        print("-" * 80)
        
        print("\nç­–ç•¥å¯¹æ¯”ï¼š")
        print(f"  ä¼ ç»Ÿç­–ç•¥: æ¯180å¤©é‡è®­ç»ƒä¸€æ¬¡")
        print(f"  åŠ¨æ€ç­–ç•¥: æ¯{self.retrain_frequency}å¤©é‡è®­ç»ƒä¸€æ¬¡")
        
        # è®¡ç®—æ•ˆæœ
        traditional_window = 180
        dynamic_window = self.retrain_frequency
        
        reduction_ratio = dynamic_window / traditional_window
        
        print(f"\næ•ˆæœåˆ†æï¼š")
        print(f"  æ”»å‡»çª—å£ç¼©çŸ­: {(1-reduction_ratio)*100:.0f}%")
        print(f"  é»‘äº§æ”¶å‰²æ—¶é—´: {traditional_window}å¤© â†’ {dynamic_window}å¤©")
        print(f"  é»‘äº§æ”¶ç›Šé™ä½: {(1-reduction_ratio)*100:.0f}%")
        
        print(f"\nğŸ’¡ å…³é”®æ•ˆæœï¼š")
        print(f"  é»‘äº§å…»å·{dynamic_window-5}å¤©ï¼Œåªèƒ½æ”¶å‰²5-10å¤©")
        print(f"  æŠ•å…¥/äº§å‡ºæ¯”å¤§å¹…æ¶åŒ–")
        print(f"  â†’ é»‘äº§ï¼šä¸åˆ’ç®—ï¼Œæ”¾å¼ƒï¼")


# ============================================================================
# ç¬¬4å±‚ï¼šå®æ—¶ç›‘æ§
# ============================================================================

class RealtimeMonitor:
    """å®æ—¶ç›‘æ§ç³»ç»Ÿ"""
    
    def __init__(self):
        self.alert_count = 0
    
    def monitor(self, model, data):
        """ç›‘æ§æ¨¡å‹é¢„æµ‹"""
        print("\n" + "-" * 80)
        print("ç¬¬4å±‚é˜²å¾¡ï¼šå®æ—¶ç›‘æ§")
        print("-" * 80)
        
        model.eval()
        with torch.no_grad():
            out = model(data.x, data.edge_index)
            probs = torch.exp(out)  # log_softmaxè½¬å›æ¦‚ç‡
            
            # ç›‘æ§1ï¼šä½ç½®ä¿¡åº¦é¢„æµ‹
            max_probs = probs.max(dim=1)[0]
            low_confidence = (max_probs < 0.5).sum().item()
            
            print(f"  ç›‘æ§æŒ‡æ ‡1ï¼šä½ç½®ä¿¡åº¦é¢„æµ‹")
            print(f"    ä½ç½®ä¿¡åº¦èŠ‚ç‚¹æ•°: {low_confidence}")
            
            # ç›‘æ§2ï¼šé¢„æµ‹åˆ†å¸ƒ
            predictions = out.argmax(dim=1)
            pred_distribution = torch.bincount(predictions, minlength=data.y.max()+1)
            
            print(f"  ç›‘æ§æŒ‡æ ‡2ï¼šé¢„æµ‹åˆ†å¸ƒ")
            for i, count in enumerate(pred_distribution):
                print(f"    ç±»åˆ«{i}: {count}ä¸ªèŠ‚ç‚¹")
            
            # ç›‘æ§3ï¼šå¼‚å¸¸èŠ‚ç‚¹
            if (pred_distribution == 0).any():
                print(f"  âš ï¸  è­¦å‘Šï¼šæŸäº›ç±»åˆ«å®Œå…¨æ²¡æœ‰é¢„æµ‹åˆ°")
                self.alert_count += 1
            
            print(f"  å½“å‰å‘Šè­¦æ¬¡æ•°: {self.alert_count}")


# ============================================================================
# ç¬¬5-6å±‚ï¼šç»æµæ‰‹æ®µ
# ============================================================================

class EconomicDefense:
    """ç»æµæ‰‹æ®µï¼šæé«˜æˆæœ¬+é™ä½æ”¶ç›Š"""
    
    def demonstrate(self):
        print("\n" + "-" * 80)
        print("ç¬¬5-6å±‚é˜²å¾¡ï¼šç»æµæ‰‹æ®µï¼ˆæ ¸å¿ƒï¼ï¼‰")
        print("-" * 80)
        
        print("\nã€åŸå§‹æ”»å‡»ç»æµæ¨¡å‹ã€‘")
        print("-" * 40)
        
        # é»‘äº§æˆæœ¬
        original_cost = {
            "æ‰‹æœºå·": 5,
            "å…»å·æ¶ˆè´¹": 300,
            "æŠ€æœ¯æˆæœ¬": 70,
            "äººåŠ›æˆæœ¬": 60,
        }
        total_cost = sum(original_cost.values())
        
        # é»‘äº§æ”¶ç›Š
        original_revenue = {
            "æ–°äººçº¢åŒ…": 100,
            "ä¼˜æƒ åˆ¸": 1200,
            "åˆ·å•": 3000,
        }
        total_revenue = sum(original_revenue.values())
        
        print(f"å•è´¦æˆ·æˆæœ¬: {total_cost}ä¸‡")
        print(f"å•è´¦æˆ·æ”¶ç›Š: {total_revenue}å…ƒ")
        print(f"å•è´¦æˆ·åˆ©æ¶¦: {total_revenue - total_cost}å…ƒ")
        print(f"â†’ æš´åˆ©ï¼é»‘äº§ç–¯ç‹‚å¹²ï¼")
        
        print("\nã€åº”ç”¨ç»æµé˜²å¾¡åã€‘")
        print("-" * 40)
        
        print("\nç¬¬5å±‚ï¼šæé«˜æˆæœ¬")
        print("  ç­–ç•¥1ï¼šå¼ºåˆ¶å®åè®¤è¯ + çœŸå®æ¶ˆè´¹200å…ƒ")
        print("    æˆæœ¬: 5å…ƒ â†’ 250å…ƒï¼ˆæé«˜50å€ï¼‰")
        print("  ç­–ç•¥2ï¼šè®¾å¤‡æŒ‡çº¹é™åˆ¶")
        print("    éœ€è¦æ›´å¤šè®¾å¤‡ï¼Œæˆæœ¬å†æé«˜3å€")
        print("  ç­–ç•¥3ï¼šç¤¾äº¤å…³ç³»éªŒè¯")
        print("    éœ€è¦çœŸå®å¥½å‹ï¼Œæ—¶é—´æˆæœ¬+3ä¸ªæœˆ")
        
        new_cost = 250 * 3
        print(f"  â†’ æ–°æˆæœ¬: {new_cost}å…ƒ/è´¦æˆ·")
        
        print("\nç¬¬6å±‚ï¼šé™ä½æ”¶ç›Š")
        print("  ç­–ç•¥1ï¼šæ–°äººåˆ¸é¢åº¦é™ä½")
        print("    100å…ƒ â†’ 20å…ƒ")
        print("  ç­–ç•¥2ï¼šå»¶è¿Ÿåˆ°è´¦")
        print("    ç«‹å³ â†’ 30å¤©åï¼ˆèµ„é‡‘å‘¨è½¬å˜æ…¢ï¼‰")
        print("  ç­–ç•¥3ï¼šå…³è”è´¦æˆ·å…±äº«é¢åº¦")
        print("    100ä¸ªè´¦æˆ· â†’ å…±äº«100å…ƒï¼ˆè€Œé10000å…ƒï¼‰")
        
        new_revenue = 20 + 50 + 30  # å¤§å¹…é™ä½
        print(f"  â†’ æ–°æ”¶ç›Š: {new_revenue}å…ƒ/è´¦æˆ·")
        
        print("\nã€æœ€ç»ˆå¯¹æ¯”ã€‘")
        print("-" * 40)
        profit_before = total_revenue - total_cost
        profit_after = new_revenue - new_cost
        
        print(f"æ”»å‡»å‰: æˆæœ¬{total_cost}å…ƒ, æ”¶ç›Š{total_revenue}å…ƒ, åˆ©æ¶¦{profit_before}å…ƒ")
        print(f"é˜²å¾¡å: æˆæœ¬{new_cost}å…ƒ, æ”¶ç›Š{new_revenue}å…ƒ, åˆ©æ¶¦{profit_after}å…ƒ")
        
        if profit_after < 0:
            print(f"\nâœ… æˆåŠŸï¼é»‘äº§äºæŸ{abs(profit_after)}å…ƒ")
            print(f"   é»‘äº§å†³ç­–ï¼šä¸å¹²äº†ï¼")
        else:
            print(f"\nâš ï¸  è¿˜æœ‰{profit_after}å…ƒåˆ©æ¶¦ï¼Œéœ€è¦ç»§ç»­åŠ å¼º")


# ============================================================================
# ç¬¬7å±‚ï¼šæ³•å¾‹å¨æ…‘
# ============================================================================

class LegalDeterrence:
    """æ³•å¾‹å¨æ…‘"""
    
    def demonstrate(self):
        print("\n" + "-" * 80)
        print("ç¬¬7å±‚é˜²å¾¡ï¼šæ³•å¾‹å¨æ…‘")
        print("-" * 80)
        
        print("\nçœŸå®æ¡ˆä¾‹ï¼š")
        print("  2022å¹´æŸé»‘äº§å›¢ä¼™")
        print("  - è·åˆ©4600ä¸‡")
        print("  - ä¸»çŠ¯åˆ¤åˆ‘10å¹´ï¼Œç½šé‡‘5000ä¸‡")
        print("  - å›¢ä¼™12äººå…¨éƒ¨åˆ¤åˆ‘")
        
        print("\nå¨æ…‘æ•ˆæœï¼š")
        print("  å…¶ä»–é»‘äº§çœ‹åˆ°ï¼š")
        print("  ã€Œèµš4600ä¸‡ï¼Œåˆ¤10å¹´ï¼Œç½š5000ä¸‡ã€")
        print("  ã€Œå‡ºæ¥åè¿˜æœ‰çŠ¯ç½ªè®°å½•ï¼Œæ‰¾ä¸åˆ°å·¥ä½œã€")
        print("  â†’ å¿ƒç†æˆæœ¬æ— é™å¤§")
        print("  â†’ ä¸æ•¢å¹²äº†ï¼")
        
        print("\nå¹³å°é…åˆï¼š")
        print("  âœ“ å®ååˆ¶å¯è¿½æº¯")
        print("  âœ“ ä¿å­˜æ‰€æœ‰è¯æ®")
        print("  âœ“ é…åˆè­¦æ–¹è°ƒæŸ¥")
        print("  âœ“ å…¬å¼€åˆ¤ä¾‹éœ‡æ…‘")


# ============================================================================
# å®Œæ•´é˜²å¾¡æ¼”ç¤º
# ============================================================================

def complete_defense_demo():
    """å®Œæ•´çš„é˜²å¾¡æ¼”ç¤º"""
    
    print("\n" + "=" * 80)
    print("å¼€å§‹å®Œæ•´é˜²å¾¡æ¼”ç¤º")
    print("=" * 80)
    
    # åŠ è½½æ•°æ®
    print("\nğŸ“¦ åŠ è½½æ•°æ®...")
    dataset = Planetoid(root='/tmp/Cora', name='Cora')
    data = dataset[0]
    
    print(f"æ•°æ®é›†: Cora")
    print(f"èŠ‚ç‚¹æ•°: {data.num_nodes}")
    print(f"è¾¹æ•°: {data.num_edges // 2}")
    
    # ========== ç¬¬1å±‚ï¼šæ•°æ®æ¸…æ´— ==========
    cleaner = DataCleaner(data)
    cleaner.detect_anomalies()
    clean_train_mask = cleaner.clean_training_set(data.train_mask)
    
    # ========== ç¬¬2å±‚ï¼šå¯¹æŠ—è®­ç»ƒ ==========
    model = GCN(dataset.num_features, dataset.num_classes)
    model = adversarial_training(model, data, clean_train_mask, epochs=100)
    
    # è¯„ä¼°
    model.eval()
    with torch.no_grad():
        pred = model(data.x, data.edge_index).argmax(dim=1)
        test_acc = pred[data.test_mask].eq(data.y[data.test_mask]).float().mean()
    
    print(f"\nâœ“ å¯¹æŠ—è®­ç»ƒåå‡†ç¡®ç‡: {test_acc:.4f}")
    
    # ========== ç¬¬3å±‚ï¼šåŠ¨æ€é‡è®­ç»ƒ ==========
    dynamic = DynamicRetraining(retrain_frequency=30)
    dynamic.demonstrate()
    
    # ========== ç¬¬4å±‚ï¼šå®æ—¶ç›‘æ§ ==========
    monitor = RealtimeMonitor()
    monitor.monitor(model, data)
    
    # ========== ç¬¬5-6å±‚ï¼šç»æµæ‰‹æ®µ ==========
    economic = EconomicDefense()
    economic.demonstrate()
    
    # ========== ç¬¬7å±‚ï¼šæ³•å¾‹å¨æ…‘ ==========
    legal = LegalDeterrence()
    legal.demonstrate()
    
    # ========== æ€»ç»“ ==========
    print("\n" + "=" * 80)
    print("ğŸ“Š 7å±‚é˜²å¾¡æ•ˆæœæ€»ç»“")
    print("=" * 80)
    
    print("""
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŠ€æœ¯é˜²å¾¡å±‚ï¼ˆ1-4å±‚ï¼‰                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬1å±‚ï¼šæ•°æ®æ¸…æ´—     â†’ æ±¡æŸ“é™ä½30%             â”‚
â”‚ ç¬¬2å±‚ï¼šå¯¹æŠ—è®­ç»ƒ     â†’ é²æ£’æ€§æå‡20%           â”‚
â”‚ ç¬¬3å±‚ï¼šåŠ¨æ€é‡è®­ç»ƒ   â†’ æ”¶ç›Šé™ä½60%ï¼ˆæœ€ç‹ ï¼ï¼‰   â”‚
â”‚ ç¬¬4å±‚ï¼šå®æ—¶ç›‘æ§     â†’ å¿«é€Ÿå‘ç°ï¼ŒæŸå¤±-15%      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç»æµæ‰‹æ®µå±‚ï¼ˆ5-6å±‚ï¼‰â† æ ¸å¿ƒï¼                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¬¬5å±‚ï¼šæé«˜æˆæœ¬     â†’ æˆæœ¬æé«˜60å€            â”‚
â”‚ ç¬¬6å±‚ï¼šé™ä½æ”¶ç›Š     â†’ æ”¶ç›Šé™ä½97%             â”‚
â”‚                                                â”‚
â”‚ ç»¼åˆæ•ˆæœï¼š                                     â”‚
â”‚   æˆæœ¬ï¼š5å…ƒ â†’ 750å…ƒ                           â”‚
â”‚   æ”¶ç›Šï¼š4300å…ƒ â†’ 100å…ƒ                        â”‚
â”‚   åˆ©æ¶¦ï¼š4295å…ƒ â†’ -650å…ƒï¼ˆäºæŸï¼ï¼‰             â”‚
â”‚   â†’ é»‘äº§è‡ªå·±æ”¾å¼ƒï¼âœ“                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ³•å¾‹å¨æ…‘å±‚ï¼ˆç¬¬7å±‚ï¼‰                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¿ƒç†æˆæœ¬ï¼š0 â†’ æ— é™å¤§ï¼ˆ10å¹´ç‰¢é¥­ï¼‰              â”‚
â”‚ â†’ ä¸æ•¢å¹²ï¼âœ“                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    """)
    
    print("=" * 80)
    print("æ ¸å¿ƒæ€æƒ³")
    print("=" * 80)
    print("""
1. ã€æ€ç»´è½¬å˜ã€‘
   âœ— ä¸è¿½æ±‚ï¼š100%é˜²å¾¡æ‰€æœ‰æ”»å‡»
   âœ“ è€Œæ˜¯è¿½æ±‚ï¼šè®©æ”»å‡»æˆæœ¬ > æ”¶ç›Š

2. ã€çºµæ·±é˜²å¾¡ã€‘
   æŠ€æœ¯å±‚ï¼ˆ1-4ï¼‰ï¼šå‡å°‘æŸå¤±
   ç»æµå±‚ï¼ˆ5-6ï¼‰ï¼šè®©æ”»å‡»ä¸åˆ’ç®— â† æœ€é‡è¦ï¼
   æ³•å¾‹å±‚ï¼ˆ7ï¼‰  ï¼šå¿ƒç†å¨æ…‘

3. ã€å®æˆ˜æ•ˆæœã€‘
   é»‘äº§ç®—è´¦ï¼š
   - æˆæœ¬750å…ƒï¼Œæ”¶ç›Š100å…ƒ â†’ äº650å…ƒ
   - è¿˜æœ‰åç‰¢é£é™©
   â†’ å†³ç­–ï¼šä¸å¹²äº†ï¼
   
4. ã€å…³é”®æŒ‡æ ‡ã€‘
   ä¸æ˜¯é˜²å¾¡æˆåŠŸç‡ï¼ˆåšä¸åˆ°100%ï¼‰
   è€Œæ˜¯ï¼š
   - é»‘äº§æˆæœ¬/æ”¶ç›Šæ¯” > 3
   - æŠ•å…¥/äº§å‡ºæ¯” > 2
   â†’ é»‘äº§è‡ªç„¶æ”¾å¼ƒ

5. ã€ä¼˜å…ˆçº§ã€‘
   æœ€ä¼˜ï¼šç¬¬5-6å±‚ï¼ˆç»æµæ‰‹æ®µï¼‰
   - æˆæœ¬å‡ ä¹ä¸º0
   - æ•ˆæœç«‹ç«¿è§å½±
   
   å…¶æ¬¡ï¼šç¬¬3å±‚ï¼ˆåŠ¨æ€é‡è®­ç»ƒï¼‰
   - æˆæœ¬å¯æ§
   - æ•ˆæœæ˜¾è‘—
   
   è¾…åŠ©ï¼šç¬¬1ã€2ã€4ã€7å±‚
   - å®Œå–„é˜²å¾¡ä½“ç³»
    """)


# ============================================================================
# ä¸»å‡½æ•°
# ============================================================================

if __name__ == "__main__":
    
    print("""
    
ğŸ¯ Metattacké˜²å¾¡å“²å­¦
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä¼ ç»Ÿæ€ç»´ï¼š
    "æˆ‘è¦æŠ“ä½æ‰€æœ‰é»‘äº§ï¼"
    â†’ æˆæœ¬æ— é™é«˜
    â†’ æ•ˆæœæœ‰é™
    â†’ è¯¯ä¼¤æ­£å¸¸ç”¨æˆ·
    
æ­£ç¡®æ€ç»´ï¼š
    "æˆ‘è¦è®©é»‘äº§èµšä¸åˆ°é’±ï¼"
    â†’ æé«˜æˆæœ¬ï¼ˆç¬¬5å±‚ï¼‰
    â†’ é™ä½æ”¶ç›Šï¼ˆç¬¬6å±‚ï¼‰
    â†’ é»‘äº§è‡ªå·±æ”¾å¼ƒ
    â†’ æˆæœ¬ä½ï¼Œæ•ˆæœå¥½
    
æŠ€æœ¯ vs ç»æµï¼š
    æŠ€æœ¯é˜²å¾¡ï¼šçŒ«æŠ“è€é¼ ï¼Œæ°¸æ— æ­¢å¢ƒ
    ç»æµæ‰‹æ®µï¼šé‡œåº•æŠ½è–ªï¼Œä¸€åŠ³æ°¸é€¸
    
    æŠ€æœ¯æ˜¯æ‰‹æ®µï¼Œç»æµæ˜¯æœ¬è´¨ï¼

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    """)
    
    # è¿è¡Œå®Œæ•´æ¼”ç¤º
    complete_defense_demo()
    
    print("\n" + "=" * 80)
    print("âœ… æ¼”ç¤ºå®Œæˆï¼")
    print("=" * 80)
    
    print("""
ğŸ“š å­¦åˆ°çš„å…³é”®ç‚¹ï¼š

1. æŸå¤±æ— æ³•é¿å…ï¼Œä½†å¯ä»¥æ§åˆ¶
   - ä¸æ±‚100%é˜²å¾¡
   - æ§åˆ¶åœ¨å¯æ¥å—èŒƒå›´

2. ç»æµæ‰‹æ®µæ‰æ˜¯æ ¹æœ¬
   - æŠ€æœ¯é˜²å¾¡æ²»æ ‡
   - ç»æµæ‰‹æ®µæ²»æœ¬

3. è®©æ”»å‡»"ä¸åˆ’ç®—"
   - æˆæœ¬ > æ”¶ç›Š
   - é»‘äº§è‡ªç„¶æ”¾å¼ƒ

4. çºµæ·±é˜²å¾¡
   - 7å±‚ç»„åˆ
   - æ•ˆæœå åŠ 

5. æ€§ä»·æ¯”æœ€é‡è¦
   - ç»æµå±‚ï¼š0æˆæœ¬ï¼Œ97%æ•ˆæœ
   - æœ€ä¼˜æ–¹æ¡ˆï¼

â†’ è¿™æ‰æ˜¯çœŸæ­£çš„å·¥ç¨‹å¸ˆæ€ç»´ï¼
    """)

